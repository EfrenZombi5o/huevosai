<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Assistant with Voice & Code Typing + Chat Delete</title>

  <!-- Google Fonts: Fira Code for code blocks -->
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet" />

  <!-- Highlight.js CSS for syntax highlighting -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css"
  />

  <!-- Your CSS -->
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <!-- Login Modal -->
  <div id="loginModal" style="display:flex;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);align-items:center;justify-content:center;z-index:10000;">
    <div style="background:#fff;padding:20px;border-radius:8px;max-width:320px;width:100%;text-align:center;box-sizing:border-box;">
      <h2>Login or Sign Up</h2>
      <input type="email" id="emailInput" placeholder="Email" style="width:100%;padding:8px;margin:8px 0;border-radius:4px;border:1px solid #ccc;" />
      <input type="password" id="passwordInput" placeholder="Password" style="width:100%;padding:8px;margin:8px 0;border-radius:4px;border:1px solid #ccc;" />
      <button id="loginBtn" style="width:100%;padding:10px;margin-top:8px;border:none;background:#6200ee;color:#fff;border-radius:4px;cursor:pointer;">Login</button>
      <button id="signupBtn" style="width:100%;padding:10px;margin-top:8px;border:none;background:#03dac6;color:#000;border-radius:4px;cursor:pointer;">Sign Up</button>

      <!-- Google Sign-In Button -->
      <button id="googleSignInBtn" style="width:100%;padding:10px;margin-top:12px;border:none;background:#4285F4;color:#fff;border-radius:4px;cursor:pointer;font-weight:600;">
        Sign in with Google
      </button>

      <p id="loginError" style="color:red;margin-top:8px;min-height:1.2em;"></p>
    </div>
  </div>

  <div id="sidebar">
    <div id="chatListHeader">Chats</div>
    <ul id="chatList"></ul>
    <form id="newChatForm">
      <input
        type="text"
        id="newChatName"
        placeholder="New chat name"
        autocomplete="off"
        required
      />
      <button type="submit" id="createChatBtn">Create Chat</button>
    </form>
  </div>

  <div id="main">
    <div id="chat"></div>
    <div id="status"></div>
    <div id="input-area">
      <textarea
        id="prompt"
        rows="2"
        placeholder="Type your message..."
        autocomplete="off"
      ></textarea>
      <button id="voiceInputBtn" title="Voice Input">üé§</button>
      <button id="sendBtn" title="Send Message">‚û°Ô∏è</button>
    </div>
    <div id="controls">
      <select id="modelSelect" title="Select AI Model">
        <optgroup label="DeepSeek Models">
          <option value="deepseek-chat">DeepSeek Chat (DeepSeek V3)</option>
          <option value="deepseek-reasoner">DeepSeek Reasoner (DeepSeek R1)</option>
        </optgroup>
        <optgroup label="Gemini Models">
          <option value="google/gemini-2.5-pro-exp-03-25:free">Gemini 2.5 Pro</option>
          <option value="google/gemini-2.0-flash-lite-001">Gemini 2.0 Flash Lite</option>
          <option value="google/gemini-flash-1.5-8b">Gemini 1.5 Flash</option>
        </optgroup>
        <optgroup label="OpenAI-Compatible Models">
          <option value="gpt-4o">GPT-4o</option>
          <option value="gpt-4.1">GPT-4.1</option>
          <option value="o3-mini">o3-mini</option>
          <option value="o1-mini">o1-mini</option>
          <option value="gpt-4.5-preview">GPT-4.5 Preview</option>
        </optgroup>
      </select>
      <button id="generateImageBtn" title="Generate Image">üñºÔ∏è</button>
      <button id="voiceToggle" title="Toggle Assistant Voice">üîä</button>
      <button id="darkModeToggle" title="Toggle Dark Mode">üåô</button>
    </div>
  </div>

  <!-- Mic permission prompt -->
  <div id="micPermissionPrompt" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.6);align-items:center;justify-content:center;z-index:10000;">
    <div style="background:#fff;padding:20px;border-radius:8px;max-width:320px;width:90%;text-align:center;box-sizing:border-box;">
      <p>This app needs access to your microphone to enable voice input.</p>
      <button id="allowMicBtn" style="margin:8px;padding:10px 20px;border:none;background:#6200ee;color:#fff;border-radius:4px;cursor:pointer;">Allow Microphone</button>
      <button id="denyMicBtn" style="margin:8px;padding:10px 20px;border:none;background:#ccc;color:#000;border-radius:4px;cursor:pointer;">Cancel</button>
    </div>
  </div>

  <!-- External AI SDK -->
  <script src="https://js.puter.com/v2/" defer></script>

  <!-- Highlight.js JS -->
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"
    defer
  ></script>

  <!-- Firebase Initialization -->
  <script type="module" src="js/firebase-app.js"></script>

  <!-- Your JavaScript -->
  <script type="module" src="js/app.js"></script>
</body>
</html>
